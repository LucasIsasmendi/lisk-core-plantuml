<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="836px" preserveAspectRatio="none" style="width:281px;height:836px;" version="1.1" viewBox="0 0 281 836" width="281px" zoomAndPan="magnify"><defs><linearGradient id="g1wm7yj0yo3tsa0" x1="0%" x2="100%" y1="50%" y2="50%"><stop offset="0%" stop-color="#F0F8FF"/><stop offset="100%" stop-color="#ADD8E6"/></linearGradient><filter height="300%" id="f1wm7yj0yo3tsa" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Rounds--><rect fill="url(#g1wm7yj0yo3tsa0)" filter="url(#f1wm7yj0yo3tsa)" height="410.5313" id="Rounds" style="stroke: #00008B; stroke-width: 1.5;" width="266" x="6" y="8.5"/><ellipse cx="82.25" cy="24.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #00008B; stroke-width: 1.0;"/><path d="M85.2188,30.1406 Q84.6406,30.4375 84,30.5859 Q83.3594,30.7344 82.6563,30.7344 Q80.1563,30.7344 78.8359,29.0859 Q77.5156,27.4375 77.5156,24.3125 Q77.5156,21.1875 78.8359,19.5313 Q80.1563,17.875 82.6563,17.875 Q83.3594,17.875 84.0078,18.0313 Q84.6563,18.1875 85.2188,18.4844 L85.2188,21.2031 Q84.5938,20.625 84,20.3516 Q83.4063,20.0781 82.7813,20.0781 Q81.4375,20.0781 80.75,21.1484 Q80.0625,22.2188 80.0625,24.3125 Q80.0625,26.4063 80.75,27.4766 Q81.4375,28.5469 82.7813,28.5469 Q83.4063,28.5469 84,28.2734 Q84.5938,28 85.2188,27.4219 L85.2188,30.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="102.75" y="28.6543">Rounds</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="56" x="219" y="5.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="46" x="224" y="17.6387">module</text><line style="stroke: #00008B; stroke-width: 1.5;" x1="7" x2="271" y1="40.5" y2="40.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="49.4023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="26" y="54.7104">__private: {}</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="62.207"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="26" y="67.5151">self: this</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="91.8164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="26" y="97.1245">logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="104.6211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="26" y="109.9292">db</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="117.4258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="26" y="122.7339">bus</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="130.2305"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="26" y="135.5386">network</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="143.0352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="26" y="148.3433">config.loading.snapshot</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="7" x2="121" y1="80.5117" y2="80.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="121" y="83.8198">library</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="157" x2="271" y1="80.5117" y2="80.5117"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="172.6445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="26" y="177.9526">blocks</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="185.4492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="26" y="190.7573">accounts</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="198.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="26" y="203.562">delegates</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="7" x2="114.5" y1="161.3398" y2="161.3398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="114.5" y="164.6479">modules</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="163.5" x2="271" y1="161.3398" y2="161.3398"/><ellipse cx="17" cy="230.8633" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="26" y="233.1714">Rounds (cb, scope)</text><ellipse cx="17" cy="243.668" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="26" y="245.9761">loaded ()</text><ellipse cx="17" cy="256.4727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="26" y="258.7808">ticking ()</text><ellipse cx="17" cy="269.2773" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="26" y="271.5854">calc (height)</text><ellipse cx="17" cy="282.082" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="26" y="284.3901">flush (round, cb)</text><ellipse cx="17" cy="294.8867" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="26" y="297.1948">directionSwap (direction, lastBlock, cb)</text><ellipse cx="17" cy="307.6914" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="26" y="309.9995">backwardTick (block, previousBlock, done)</text><ellipse cx="17" cy="320.4961" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="26" y="322.8042">tick (block, done)</text><ellipse cx="17" cy="333.3008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="26" y="335.6089">sandboxApi (call, args, cb)</text><ellipse cx="17" cy="346.1055" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="26" y="348.4136">onBind (scope)</text><ellipse cx="17" cy="358.9102" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="120" x="26" y="361.2183">onBlockchainReady ()</text><ellipse cx="17" cy="371.7148" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="26" y="374.0229">onFinishRound (round)</text><ellipse cx="17" cy="384.5195" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="26" y="386.8276">cleanup (cb)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="394.3242"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="26" y="399.6323">getOutsiders (scope, cb)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="407.1289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="26" y="412.437">sumRound (round, cb)</text><line style="stroke: #00008B; stroke-width: 1.0;" x1="7" x2="115" y1="216.5586" y2="216.5586"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="115" y="219.8667">Methods</text><line style="stroke: #00008B; stroke-width: 1.0;" x1="163" x2="271" y1="216.5586" y2="216.5586"/><!--class Round--><rect fill="url(#g1wm7yj0yo3tsa0)" filter="url(#f1wm7yj0yo3tsa)" height="329.7031" id="Round" style="stroke: #00008B; stroke-width: 1.5;" width="163" x="57.75" y="498"/><ellipse cx="95.25" cy="514" fill="#ADD1B2" rx="11" ry="11" style="stroke: #00008B; stroke-width: 1.0;"/><path d="M98.2188,519.6406 Q97.6406,519.9375 97,520.0859 Q96.3594,520.2344 95.6563,520.2344 Q93.1563,520.2344 91.8359,518.5859 Q90.5156,516.9375 90.5156,513.8125 Q90.5156,510.6875 91.8359,509.0313 Q93.1563,507.375 95.6563,507.375 Q96.3594,507.375 97.0078,507.5313 Q97.6563,507.6875 98.2188,507.9844 L98.2188,510.7031 Q97.5938,510.125 97,509.8516 Q96.4063,509.5781 95.7813,509.5781 Q94.4375,509.5781 93.75,510.6484 Q93.0625,511.7188 93.0625,513.8125 Q93.0625,515.9063 93.75,516.9766 Q94.4375,518.0469 95.7813,518.0469 Q96.4063,518.0469 97,517.7734 Q97.5938,517.5 98.2188,516.9219 L98.2188,519.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="40" x="114.25" y="518.1543">Round</text><rect fill="#FFFFFF" height="15.9688" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" width="39" x="184.75" y="495"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="29" x="189.75" y="507.1387">logic</text><line style="stroke: #00008B; stroke-width: 1.5;" x1="58.75" x2="219.75" y1="530" y2="530"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="538.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="77.75" y="544.2104">this.scope: scope</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="551.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="41" x="77.75" y="557.0151">this.t: t</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="581.3164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="77.75" y="586.6245">modules: accounts</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="594.1211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="77.75" y="599.4292">__private</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="606.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="77.75" y="612.2339">block</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="619.7305"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="77.75" y="625.0386">round</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="632.5352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="77.75" y="637.8433">backwards</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="645.3398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="77.75" y="650.6479">delegates</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="658.1445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="77.75" y="663.4526">finishRound</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="65.75" y="670.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="77.75" y="676.2573">snapshotRound</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="58.75" x2="122.25" y1="570.0117" y2="570.0117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="122.25" y="573.3198">scope</text><line style="stroke: #00008B; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="156.25" x2="219.75" y1="570.0117" y2="570.0117"/><ellipse cx="68.75" cy="703.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="77.75" y="705.8667">Round (scope, t)</text><ellipse cx="68.75" cy="716.3633" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="77.75" y="718.6714">mergeBlockGenerator ()</text><ellipse cx="68.75" cy="729.168" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="77.75" y="731.4761">updateMissedBlocks ()</text><ellipse cx="68.75" cy="741.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="77.75" y="744.2808">getVotes ()</text><ellipse cx="68.75" cy="754.7773" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="77.75" y="757.0854">updateVotes ()</text><ellipse cx="68.75" cy="767.582" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="77.75" y="769.8901">markBlockId ()</text><ellipse cx="68.75" cy="780.3867" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="77.75" y="782.6948">flushRound ()</text><ellipse cx="68.75" cy="793.1914" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="77.75" y="795.4995">truncateBlocks ()</text><ellipse cx="68.75" cy="805.9961" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="77.75" y="808.3042">applyRound ()</text><ellipse cx="68.75" cy="818.8008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="77.75" y="821.1089">land ()</text><line style="stroke: #00008B; stroke-width: 1.0;" x1="58.75" x2="115.25" y1="689.2539" y2="689.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="115.25" y="692.562">Methods</text><line style="stroke: #00008B; stroke-width: 1.0;" x1="163.25" x2="219.75" y1="689.2539" y2="689.2539"/><!--link Rounds to Round--><path d="M139,439.538 C139,459.153 139,478.758 139,497.748 " fill="none" id="Rounds-Round" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="none" points="132,439.532,139,419.532,146,439.532,132,439.532" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="140" y="463.0669">new</text><!--
@startuml
skinparam class {
	BackgroundColor AliceBlue|LightBlue
	ArrowColor Black
	BorderColor DarkBlue
}
class Rounds < module > {
  - __private: {}
  - self: this
  .. library ..
  - logger
  - db
  - bus
  - network
  - config.loading.snapshot
  .. modules ..
  - blocks
  - accounts
  - delegates
  - - Methods - -
  + Rounds (cb, scope)
  + loaded ()
  + ticking ()
  + calc (height)
  + flush (round, cb)
  + directionSwap (direction, lastBlock, cb)
  + backwardTick (block, previousBlock, done)
  + tick (block, done)
  + sandboxApi (call, args, cb)
  + onBind (scope)
  + onBlockchainReady ()
  + onFinishRound (round)
  + cleanup (cb)
  - getOutsiders (scope, cb)
  - sumRound (round, cb)
}
class Round < logic > {
  - this.scope: scope
	- this.t: t
  .. scope ..
  - modules: accounts
  - __private
  - block
  - round
  - backwards
  - delegates
  - finishRound
  - snapshotRound
  - - Methods - -
  + Round (scope, t)
  + mergeBlockGenerator ()
  + updateMissedBlocks ()
  + getVotes ()
  + updateVotes ()
  + markBlockId ()
  + flushRound ()
  + truncateBlocks ()
  + applyRound ()
  + land ()
}

Rounds ^- - Round : new
@enduml

PlantUML version 1.2017.12(Wed Apr 26 13:06:36 ART 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Linux
OS Version: 3.13.0-119-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>